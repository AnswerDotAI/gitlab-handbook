# See docs for redirects in GitLab Pages:
#   https://docs.gitlab.com/ee/user/project/pages/redirects.html
#
# This file is automatically generated from a template:
#   layouts/index.redirects
#
# Please add in chronological order by removal date following https://handbook.gitlab.com/docs/development/#redirects.

{{ $aliases := newScratch -}}
{{ $section_aliases := newScratch -}}
{{ $root_sections := slice -}}
{{/* handle explicit aliases in frontmatter */}}
{{- range $p := .Site.Pages -}}
{{- $aliases.Add $p.RelPermalink $p.Aliases -}}
{{- end -}}
{{- range .Site.Sections -}}
{{- $root_sections = $root_sections | append .RelPermalink -}}
{{- end -}}
{{/* custom aliases for handbook sections */}}
{{- with site.GetPage "handbook" -}}
{{- range .Sections -}}
{{- if not (in $root_sections (replace .RelPermalink "/handbook" "")) -}}
{{- $section_aliases.Add (printf "%s:splat" .RelPermalink) (replace .RelPermalink "/handbook" "" 1 | printf "%s*" | slice) -}}
{{- end -}}
{{- end -}}
{{- end -}}
{{ printf "\n# Aliases Generated from Front Matter" }}
{{ printf "" }}
{{- range $permalink, $redirects := $aliases.Values -}}
{{- range $r := $redirects -}}
{{- printf "%s %s\n" $r $permalink -}}
{{- end -}}
{{- end -}}
{{ printf "\n# Root level section aliases\n" }}
{{- range $permalink, $redirects := $section_aliases.Values -}}
{{- range $r := $redirects -}}
{{- printf "%s %s\n" $r $permalink -}}
{{- end -}}
{{- end -}}
{{ printf "" }}

# Handbook doesn't use .html style page locations so repoint these
/*.html /:splat/ 301

# IT Team move to CorpSec - remove 2025-09-30
/handbook/it/end-user-services/onboarding-access-requests/access-requests/ /handbook/security/corporate/end-user-services/onboarding-access-requests/access-requests/ 301
/handbook/it/end-user-services/onboarding-access-requests/access-requests/* /handbook/security/corporate/end-user-services/onboarding-access-requests/access-requests/:splat 301
/handbook/security/corporate/end-user-services/onboarding-access-requests/ /handbook/security/corporate/end-user-services/laptop-management/ 301
/handbook/it/end-user-services/ /handbook/security/corporate/end-user-services/ 301
/handbook/it/end-user-services/onboarding-access-requests/access-requests/frequently-asked-questions/ /security/corporate/end-user-services/onboarding-access-requests/access-requests/frequently-asked-questions/
/handbook/it/end-user-services/onboarding101/ /handbook/security/corporate/end-user-services/onboarding101/ 301
/handbook/it/end-user-services/onboarding101/* /handbook/security/corporate/end-user-services/onboarding101/:splat 301
/handbook/it/corporate/end-user-services/#laptop-wipe-schedules-for-it-analysts /handbook/security/corporate/end-user-services/laptop-management/laptop-wipe/ 301
/handbook/it/okta/okta-enduser-faq/ /handbook/security/corporate/end-user-services/okta/okta-enduser-faq/ 301
/handbook/it/okta/okta-enduser-faq/* /handbook/security/corporate/end-user-services/okta/okta-enduser-faq/:splat 301
/handbook/it/okta/ /handbook/security/corporate/end-user-services/okta/ 301
/handbook/it/okta/* /handbook/security/corporate/end-user-services/okta/:splat 301
/handbook/security/corporate/services/laptops/wipe/ /handbook/security/corporate/end-user-services/laptop-management/laptop-wipe/ 301


# Delivery Group move in Infra platforms - remove 2025-04-20
/handbook/engineering/infrastructure/team/delivery/ /handbook/engineering/infrastructure-platforms/gitlab-delivery/delivery/ 301
/handbook/engineering/infrastructure/team/delivery/* /handbook/engineering/infrastructure-platforms/gitlab-delivery/delivery/:splat 301

# Remove Infra TPM - remove 2025-04-29
/handbook/engineering/infrastructure/technical-program-management/ /handbook/engineering/infrastructure/ 301

# Webinar redirects - remove 2025-05-01
/handbook/customer-success/csm/segment/cse/webinar-calendar/ https://university.gitlab.com/pages/gitlab-user-webinars 301
/handbook/customer-success/csm/segment/scale/webinar-calendar/  https://university.gitlab.com/pages/gitlab-user-webinars 301

# Red Team redirects - remove 2025-05-05
/handbook/security/security-operations/red-team/red-team-roe/ /handbook/security/security-operations/red-team/how-we-operate/rules-of-engagement/ 301

# Old red team handbook - remove 2025-05-11
/handbook/security/threat-management/red-team/ /handbook/security/security-operations/red-team/ 301

# Source Code team pages move - remove 2025-05-11
/handbook/engineering/development/dev/create/source-code-be/ /handbook/engineering/devops/dev/create/source-code/backend/ 301
/handbook/engineering/development/dev/create/create-source-code-fe/ /handbook/engineering/devops/dev/create/source-code/frontend/ 301

# Old red team handbook - remove 2025-05-11
/handbook/security/threat-management/red-team/ /handbook/security/security-operations/red-team/ 301

# about.gitlab.com handbook guide redirects - remove 2025-05-25
/handbook/product/markdown-guide/ https://about.gitlab.com/community/markdown-guide-middleman/ 301

# Secure planning - remove 2025-05-27
/handbook/engineering/development/sec/secure/workflow/ /handbook/engineering/development/sec/secure/planning/ 301

# Infrastructure realignment - remove 2025-06-01
/handbook/engineering/infrastructure/platforms/ /handbook/engineering/infrastructure-platforms/ 301
/handbook/engineering/infrastructure/test-platform/ /handbook/engineering/infrastructure-platforms/developer-experience/ 301
/handbook/engineering/infrastructure/test-platform/debugging-qa-test-failures/ /handbook/engineering/infrastructure-platforms/developer-experience/debugging-end-to-end-test-failures/ 301
/handbook/engineering/infrastructure/test-platform/test-engineering-team/ /handbook/engineering/infrastructure-platforms/developer-experience/test-governance/ 301
/handbook/engineering/infrastructure/test-platform/test-engineering/ /handbook/engineering/infrastructure-platforms/developer-experience/test-governance/ 301
/handbook/engineering/infrastructure/test-platform/pipeline-monitoring/ /handbook/engineering/infrastructure-platforms/developer-experience/end-to-end-pipeline-monitoring/ 301
/handbook/engineering/infrastructure/test-platform/test-and-tools-infrastructure-team/ /handbook/engineering/infrastructure-platforms/developer-experience/development-analytics/ 301
/handbook/engineering/quality/ /handbook/engineering/infrastructure-platforms/developer-experience/ 301
/handbook/engineering/infrastructure/test-platform/gitlab-data-seeder/ https://gitlab-org.gitlab.io/quality/data-seeder 301

# Update Earth Month file - remove 2025-06-25
/handbook/legal/esg/earth-month/index.html/ /handbook/legal/esg/earth-month/ 301

# Organization filename cleanup - remove 2025-06-26
/handbook/engineering/architecture/design-documents/organization/organization-faq/ /handbook/engineering/architecture/design-documents/organization/faq/ 301

# SMB team name updates - remove 2025-07-14
/handbook/sales/commercial/global_digital_smb/* /handbook/sales/commercial/high_velocity_sales_first_orders/ 301
/handbook/sales/self-service/ /handbook/sales/high-velocity-sales-fo-team/ 301
/handbook/sales/self-service/self-service-data/ /handbook/sales/commercial/high_velocity_sales_first_orders/hvs_fo_data_ops/ 301
/handbook/sales/commercial/gds-feedback/ /handbook/sales/commercial/hvs_fo_feedback/ 301
/handbook/sales/commercial/handover/ /handbook/sales/commercial/high_velocity_sales_first_orders/ 301
/handbook/sales/commercial/first-order/ /handbook/sales/commercial/ 301
/handbook/sales/commercial/activitylogging/ /handbook/sales/commercial/high_velocity_sales_first_orders/ 301
/handbook/sales/commercial/smb/ /handbook/sales/commercial/high_velocity_sales_first_orders/ 301

# Product Dev flow moved - remove 2025-07-29
/handbook/product-development-flow/ /handbook/product-development/product-development-flow/ 301
/handbook/product-development-flow/* /handbook/product-development/product-development-flow/:splat 301

# Non-existent Incubation department - remove 2025-07-29
/handbook/engineering/development/incubation/ /handbook/engineering/development/ 301
/handbook/engineering/development/incubation/5-min-production/ https://docs.gitlab.com/cloud_seed/ 301
/handbook/engineering/development/incubation/ai-assist/ /handbook/engineering/ai/data-science/ai-powered/ 301
/handbook/engineering/development/incubation/airflow/ https://docs.gitlab.com/ci/yaml/needs/ 301
/handbook/engineering/development/incubation/apm/ https://docs.gitlab.com/operations/ 301
/handbook/engineering/development/incubation/cloud-seed/ https://docs.gitlab.com/cloud_seed/ 301
/handbook/engineering/development/incubation/dependency-firewall/ https://docs.gitlab.com/user/packages/dependency_proxy/ 301
/handbook/engineering/development/incubation/istio/ https://docs.gitlab.com/charts/installation/tools/ 301
/handbook/engineering/development/incubation/mlops/ /handbook/engineering/ai/data-science/modelops/ 301
/handbook/engineering/development/incubation/mlops/* /handbook/engineering/ai/data-science/modelops/ 301
/handbook/engineering/development/incubation/mobile-devops/ https://docs.gitlab.com/ci/mobile_devops/ 301
/handbook/engineering/development/incubation/mobile-devops/* https://docs.gitlab.com/ci/mobile_devops/ 301
/handbook/engineering/development/incubation/monitor-apm/ https://docs.gitlab.com/operations/ 301
/handbook/engineering/development/incubation/okr/ /handbook/engineering/devops/dev/plan/product-planning/ 301
/handbook/engineering/development/incubation/no-code/ https://docs.gitlab.com/user/duo_workflow/ 301
/handbook/engineering/development/incubation/real-time-collaboration/ /handbook/engineering/infrastructure/team/cloud-connector/ 301
/handbook/engineering/development/incubation/secrets-rotation/ https://docs.gitlab.com/user/application_security/secret_detection/automatic_response/ 301
/handbook/engineering/development/incubation/self-healing-dependencies/ https://gitlab.com/gitlab-org/gitlab/-/issues/260291 301
/handbook/engineering/development/incubation/server-runtime/ https://docs.gitlab.com/user/duo_workflow/ 301
/handbook/engineering/development/incubation/service-desk/ https://docs.gitlab.com/user/project/service_desk/ 301

# Old Infrastructure Department moved - remove 2025-09-30
/handbook/engineering/infrastructure/alert-playbook-management/ /handbook/engineering/infrastructure-platforms/alert-playbook-management/ 301
/handbook/engineering/infrastructure/change-management/ /handbook/engineering/infrastructure-platforms/change-management/ 301
/handbook/engineering/infrastructure/emergency-change-processes/ /handbook/engineering/infrastructure-platforms/emergency-change-processes/ 301
/handbook/engineering/infrastructure/core-platform/systems/distribution/ /handbook/engineering/infrastructure-platforms/gitlab-delivery/distribution/ 301
/handbook/engineering/infrastructure/core-platform/systems/distribution/* /handbook/engineering/infrastructure-platforms/gitlab-delivery/distribution/:splat 301
/handbook/engineering/infrastructure/faq/ /handbook/engineering/infrastructure-platforms/faq/ 301
/handbook/engineering/infrastructure/feature-support/ /handbook/engineering/infrastructure-platforms/feature-support/ 301
/handbook/engineering/infrastructure/incident-review/ /handbook/engineering/infrastructure-platforms/incident-review/ 301
/handbook/engineering/infrastructure/network-security/ /handbook/engineering/infrastructure-platforms/network-security/ 301
/handbook/engineering/infrastructure/projects/ /handbook/engineering/infrastructure-platforms/projects/ 301
/handbook/engineering/infrastructure/release-tools/ /handbook/engineering/infrastructure-platforms/release-tools/ 301
/handbook/engineering/infrastructure/service-maturity-model/ /handbook/engineering/infrastructure-platforms/service-maturity-model/ 301

# Technical Writing handbook pages - remove 2025-08-05
/handbook/product/ux/technical-writing/documentation/ /handbook/product/ux/technical-writing/#documentation 301
/handbook/product/ux/technical-writing/fundamentals/ https://university.gitlab.com/courses/gitlab-technical-writing-fundamentals 301
/handbook/product/ux/technical-writing/fundamentals/examples/ https://docs.gitlab.com/development/documentation/topic_types/ 301
/handbook/product/ux/technical-writing/setup/ https://docs.gitlab.com/development/documentation/authoring_environment/ 301
/handbook/product/ux/technical-writing/workflow/ https://docs.gitlab.com/development/documentation/workflow/ 301

# Infra library moved - remove 2025-10-10
/handbook/engineering/infrastructure/library/ https://gitlab.com/gitlab-com/gl-infra/readiness/-/tree/master/library
/handbook/engineering/infrastructure/library/* https://gitlab.com/gitlab-com/gl-infra/readiness/-/tree/master/library/:splat

# Cells project moved - remove 2025-12-22
/handbook/engineering/infrastructure/cells/ /handbook/engineering/infrastructure-platforms/tenant-scale/cells_and_organizations/ 301

# Source Code team pages move - remove 2025-08-01
/handbook/engineering/development/ /handbook/engineering/devops/ 301

# DevOps creation/reorg changes - remove 2025-08-01
/handbook/engineering/development/dev/ /handbook/engineering/devops/dev/create/source-code/frontend/ 301
/handbook/engineering/development/analytics/monitor/ /handbook/engineering/data-engineering/analytics/monitor/ 301
/handbook/engineering/development/dev/create/ /handbook/engineering/devops/dev/create/ 301
/handbook/engineering/development/dev/create/code-review/ /handbook/engineering/devops/dev/create/code-review/ 301
/handbook/engineering/development/dev/create/import-and-integrate/ /handbook/engineering/devops/dev/create/import-and-integrate/ 301
/handbook/engineering/development/dev/create/remote-development/ /handbook/engineering/devops/dev/create/remote-development/ 301
/handbook/engineering/development/dev/create/source-code/ /handbook/engineering/devops/dev/create/source-code/ 301
/handbook/engineering/development/dev/create/code-creation/ /handbook/engineering/ai/code-creation/ 301
/handbook/engineering/development/dev/create/editor-extensions/ /handbook/engineering/ai/editor-extensions/ 301
/handbook/engineering/development/dev/foundations/search/ /handbook/engineering/ai/search/ 301
/handbook/engineering/development/data-science/ /handbook/engineering/ai/data-science/  301
/handbook/engineering/development/data-science/* /handbook/engineering/ai/data-science/:splat  301
/handbook/engineering/development/dev/plan/ /handbook/engineering/devops/dev/plan/ 301
/handbook/engineering/development/dev/plan/* /handbook/engineering/devops/dev/plan/:splat 301
/handbook/engineering/development/ops/ /handbook/engineering/devops/ops/ 301
/handbook/engineering/development/ops/* /handbook/engineering/devops/ops/:splat 301

# Security Policies team pages move - remove 2025-08-25
/handbook/engineering/development/sec/software-supply-chain-security/security-policies/ /handbook/engineering/development/sec/security-risk-management/security-policies/ 301
/handbook/engineering/development/sec/software-supply-chain-security/security-policies/* /handbook/engineering/development/sec/security-risk-management/security-policies/:splat 301

# AI reorg - remove 2025-09-30
/handbook/engineering/ai/data-science/ /handbook/engineering/ai/ 301
/handbook/engineering/ai/data-science/ai-powered/ai-framework/ /handbook/engineering/ai/ai-framework/ 301
/handbook/engineering/ai/data-science/ai-powered/custom-models/ /handbook/engineering/ai/custom-models/ 301
/handbook/engineering/ai/data-science/ai-powered/duo-chat/ /handbook/engineering/ai/duo-chat/ 301
/handbook/engineering/ai/data-science/ai-powered/duo-chat/* /handbook/engineering/ai/duo-chat/:splat 301
/handbook/engineering/ai/data-science/ai-powered/duo-workflow/ /handbook/engineering/ai/duo-agent-platform/ 301
/handbook/engineering/ai/data-science/ai-powered/duo-workflow/* /handbook/engineering/ai/duo-agent-platform/:splat 301
/handbook/engineering/ai/data-science/ai-powered/workflow-catalog/ /handbook/engineering/ai/workflow-catalog/ 301
